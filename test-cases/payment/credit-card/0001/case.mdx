# クレジットカード決済 - 正常系テスト

## テスト概要
クレジットカードを使用して商品の購入が正常に完了することを確認する

## 前提条件
- テストユーザーでログイン済み
- カートに商品が追加されている
- テスト用クレジットカード番号を使用する

## テスト手順

1. **チェックアウトページへ移動**
   - カートページから「購入手続きへ」ボタンをクリック
   - チェックアウトページが表示されることを確認

2. **配送先情報の入力**
   ```yaml
   fullName: "山田 太郎"
   postalCode: "100-0001"
   prefecture: "東京都"
   city: "千代田区"
   address: "千代田1-1-1"
   building: "テストビル101号室"
   phone: "03-1234-5678"
   ```

3. **支払い方法の選択**
   - 「クレジットカード」を選択
   - カード情報入力フォームが表示されることを確認

   ![支払い方法選択画面](./payment-method.png)

4. **クレジットカード情報の入力**
   
   <CreditCardForm>
     cardNumber: "4242 4242 4242 4242"  // Stripeテストカード
     cardName: "TARO YAMADA"
     expiryDate: "12/25"
     cvv: "123"
   </CreditCardForm>

5. **注文内容の確認**
   - 商品リスト、配送先、支払い方法を確認
   - 合計金額が正しいことを確認
   
   ![注文確認画面](./order-confirmation.png)

6. **注文の確定**
   - 「注文を確定する」ボタンをクリック
   - 3Dセキュア認証画面が表示される場合は認証を完了

## 期待される結果
- 決済が正常に処理される
- 注文完了ページが表示される
- 注文番号が発行される
- 確認メールが送信される
- 在庫が適切に減少する

## 検証項目
- [ ] カード番号のフォーマットチェック（空白の自動挿入）
- [ ] 有効期限の妥当性チェック
- [ ] CVVの桁数チェック
- [ ] 決済処理中はボタンが無効化される
- [ ] エラー時のリトライ処理

## テスト用カード番号
```javascript
const testCards = {
  success: "4242 4242 4242 4242",
  declined: "4000 0000 0000 0002",
  requires3DS: "4000 0025 0000 3155",
  insufficientFunds: "4000 0000 0000 9995"
}
```

## 実行結果
<TestResult status="not-executed" />

## セキュリティ確認事項
- カード情報は暗号化されて送信される
- PCI-DSS準拠の決済ゲートウェイを使用
- カード情報はシステムに保存されない

## 備考
- テスト環境では実際の課金は発生しない
- 本番環境では必ず本物のカードでテストしないこと

## 関連テストケース
- [クレジットカード決済失敗テスト](../0002/case.mdx)
- [3Dセキュア認証テスト](../0003/case.mdx)
- [PayPal決済テスト](../../paypal/0001/case.mdx)